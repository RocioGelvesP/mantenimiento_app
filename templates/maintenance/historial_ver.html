{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Historial de Cambios del Mantenimiento #{{ mantenimiento_id }}</h2>
    {% if historial and historial[0].mantenimiento %}
        <p><strong>Código:</strong> {{ historial[0].mantenimiento.codigo }}<br>
        <strong>Nombre:</strong> {{ historial[0].mantenimiento.nombre }}</p>
    {% endif %}
    <a href="{{ url_for('maintenance.lista') }}" class="btn btn-secondary mb-3">Volver a la lista</a>
    <div class="table-responsive">
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Usuario</th>
                    <th>Campo</th>
                    <th>Valor Anterior</th>
                    <th>Valor Nuevo</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                {% for h in historial %}
                <tr>
                    <td>{{ h.fecha.strftime('%d/%m/%Y %H:%M') }}</td>
                    <td>{{ h.usuario }}</td>
                    <td>{{ h.campo }}</td>
                    <td>{{ h.valor_anterior }}</td>
                    <td>{{ h.valor_nuevo }}</td>
                    <td>{{ h.accion }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %} 